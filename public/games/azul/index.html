<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Azul: Elegant AI Duel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <noscript>This app requires JavaScript to run.</noscript>
  <div id="app" class="app" data-screen="intro">
    <section id="screen-intro" class="screen intro">
      <div class="intro-card">
        <p class="intro-kicker" id="intro-kicker">Azul / Palace of Tiles</p>
        <h1 class="intro-title" id="intro-title">Azul: Elegant AI Duel</h1>
        <p class="intro-subtitle" id="intro-subtitle">Draft tiles. Build your wall. Outscore the AI.</p>

        <div class="intro-grid" id="intro-rules">
          <div class="intro-rule">
            <h3 id="intro-rule-1-title">Draft</h3>
            <p id="intro-rule-1-body">Take all tiles of one color from a factory or the center.</p>
          </div>
          <div class="intro-rule">
            <h3 id="intro-rule-2-title">Plan</h3>
            <p id="intro-rule-2-body">Place tiles into one pattern line. Overflows go to the floor (penalty).</p>
          </div>
          <div class="intro-rule">
            <h3 id="intro-rule-3-title">Score</h3>
            <p id="intro-rule-3-body">When a line completes, move one tile to the wall and score adjacency.</p>
          </div>
        </div>

        <div class="intro-actions">
          <button class="btn" type="button" data-action="go-difficulty" id="btn-continue">Continue</button>
          <button class="btn ghost" type="button" data-action="toggle-sound" id="btn-sound">Sound: Off</button>
          <button class="btn ghost" type="button" data-action="toggle-lang" id="btn-lang">中文</button>
        </div>
      </div>
    </section>

    <section id="screen-difficulty" class="screen difficulty hidden">
      <div class="difficulty-card-shell">
        <div class="difficulty-head">
          <button class="btn ghost" type="button" data-action="go-intro" id="btn-back">Back</button>
          <div>
            <h2 class="difficulty-title" id="difficulty-title">Choose AI Difficulty</h2>
            <p class="difficulty-subtitle" id="difficulty-subtitle">Pick a pace and play style.</p>
          </div>
          <div class="difficulty-actions">
            <button class="btn ghost" type="button" data-action="toggle-sound" id="btn-sound-2">Sound: Off</button>
            <button class="btn ghost" type="button" data-action="toggle-lang" id="btn-lang-2">中文</button>
          </div>
        </div>
        <div class="difficulty-body" id="difficulty-body"></div>
        <div class="difficulty-footer">
          <button class="btn" type="button" data-action="start-game" id="btn-start">Start</button>
        </div>
      </div>
    </section>

    <section id="screen-game" class="screen game hidden">
      <div class="hud">
        <div class="hud-tabs" id="mobile-switch">
          <button class="tab" type="button" data-action="switch-board" data-board="PLAYER" id="tab-player">You</button>
          <button class="tab" type="button" data-action="switch-board" data-board="AI" id="tab-ai">AI</button>
        </div>
        <div class="hud-menu" id="hud-menu" data-open="0">
          <button class="hud-menu-toggle" type="button" data-action="toggle-hud-menu" aria-label="Menu" aria-expanded="false" aria-controls="hud-actions" id="hud-menu-toggle">⋯</button>
          <div class="hud-actions" id="hud-actions">
            <button class="hud-btn" type="button" data-action="new-game" id="btn-new-game">New</button>
            <button class="hud-btn" type="button" data-action="open-rules" id="btn-rules">Rules</button>
            <button class="hud-btn" type="button" data-action="toggle-sound" id="btn-sound-3">Sound</button>
            <button class="hud-btn" type="button" data-action="toggle-lang" id="btn-lang-3">Lang</button>
          </div>
        </div>
      </div>

      <div class="arena">
        <div class="pools">
          <div id="factories" class="factories factories--strip"></div>
          <div id="center" class="center-area"></div>
        </div>

        <main class="boards">
          <section id="player-area" class="player-area"></section>
          <section id="ai-area" class="player-area ai"></section>
        </main>
      </div>
    </section>
  </div>

  <div id="overlay" class="overlay hidden"></div>

  <div id="rules-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-header">
        <h3 id="rules-title">Quick Rules</h3>
        <button class="icon-btn" type="button" data-action="close-rules" aria-label="Close" id="rules-close">Close</button>
      </div>
      <div class="modal-body" id="rules-body">
        <p>On your turn, take all tiles of one color from a factory or the center. If you take from the center first, you also take the first-player token (counts as a floor penalty).</p>
        <p>Place tiles into a single pattern line. If the line is full, one tile moves to the wall during tiling. Extra tiles overflow to the floor.</p>
        <p>Scoring happens during wall tiling. Adjacent tiles score by line length horizontally and vertically. Floor tiles apply penalties.</p>
        <p>The game ends when any player completes a full row on their wall. Final bonuses apply for rows, columns, and complete colors.</p>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
